/*! For license information please see 328.7fdcdc36.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkdoorstep_tailoring=self.webpackChunkdoorstep_tailoring||[]).push([[328],{328:(e,s,t)=>{t.r(s),t.d(s,{default:()=>m});var a=t(43),r=t(216),l=t(952),n=t(369);const i=(0,t(639).A)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);var d=t(330),o=t(579);const c=["09:00 AM","10:00 AM","11:00 AM","12:00 PM","01:00 PM","02:00 PM","03:00 PM","04:00 PM","05:00 PM","06:00 PM"],m=()=>{const e=(0,r.Zp)(),{items:s,removeItem:t,clearCart:m}=(0,l._)(),[x,h]=(0,a.useState)({date:"",time:"",address:"",notes:"",tailorId:""}),[u,p]=(0,a.useState)([]);(0,a.useEffect)((()=>{(async()=>{const{data:e,error:s}=await d.ND.from("tailors").select("id, name");s?console.error("Error fetching tailors:",s):p(e)})()}),[]);const b=e=>{const{name:s,value:t}=e.target;h((e=>({...e,[s]:t})))};return 0===s.length?(0,o.jsxs)("div",{className:"text-center py-12",children:[(0,o.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"Your cart is empty"}),(0,o.jsx)("p",{className:"text-gray-600 mb-6",children:"Please select services before booking."}),(0,o.jsx)("button",{onClick:()=>e("/services"),className:"bg-blue-600 text-white px-6 py-2 rounded-md hover:bg-blue-700 transition-colors",children:"Browse Services"})]}):(0,o.jsxs)("div",{className:"max-w-4xl mx-auto p-6",children:[(0,o.jsx)("h1",{className:"text-3xl font-bold mb-8",children:"Complete Your Booking"}),(0,o.jsxs)("div",{className:"grid md:grid-cols-2 gap-8",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Selected Services"}),(0,o.jsx)("div",{className:"space-y-4 mb-6",children:s.map((e=>(0,o.jsx)("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:(0,o.jsxs)("div",{className:"flex justify-between items-start",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("h3",{className:"font-medium",children:e.title}),(0,o.jsxs)("div",{className:"flex items-center text-gray-600 mt-1",children:[(0,o.jsx)(n.A,{className:"w-4 h-4 mr-1"}),(0,o.jsx)("span",{children:e.price}),e.quantity&&e.quantity>1&&(0,o.jsxs)("span",{className:"ml-2",children:["x",e.quantity]})]})]}),(0,o.jsx)("button",{onClick:()=>t(e.id),className:"text-red-500 hover:text-red-700",children:(0,o.jsx)(i,{className:"w-5 h-5"})})]})},e.id)))}),(0,o.jsx)("div",{className:"bg-gray-50 p-4 rounded-lg",children:(0,o.jsxs)("div",{className:"flex justify-between items-center text-lg font-semibold",children:[(0,o.jsx)("span",{children:"Total Amount:"}),(0,o.jsxs)("span",{children:["\u20b9",s.reduce(((e,s)=>e+parseInt(s.price.replace(/[^0-9]/g,""))*(s.quantity||1)),0)]})]})})]}),(0,o.jsxs)("form",{onSubmit:async t=>{t.preventDefault();try{await(async()=>{const{date:e,time:t,address:a,notes:r,tailorId:l}=x,{data:n,error:i}=await d.ND.auth.getUser();if(i||!n.user)throw new Error("User not authenticated");const{data:o,error:c}=await d.ND.from("bookings").insert({user_id:n.user.id,service_name:s[0].title,tailor_id:l||null,booking_date:e,booking_time:t,address:a,notes:r,status:"Pending"});if(c)throw c;return o})(),alert("Booking successful!"),m(),e("/")}catch(a){console.error("Error saving booking:",a),alert("There was an error processing your booking. Please try again.")}},className:"space-y-6",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Preferred Date"}),(0,o.jsx)("input",{type:"date",name:"date",value:x.date,onChange:b,min:(new Date).toISOString().split("T")[0],className:"w-full p-2 border rounded-md",required:!0})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Preferred Time"}),(0,o.jsxs)("select",{name:"time",value:x.time,onChange:b,className:"w-full p-2 border rounded-md",required:!0,children:[(0,o.jsx)("option",{value:"",children:"Select a time slot"}),c.map((e=>(0,o.jsx)("option",{value:e,children:e},e)))]})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Address"}),(0,o.jsx)("textarea",{name:"address",value:x.address,onChange:b,className:"w-full p-2 border rounded-md",rows:3,required:!0,placeholder:"Enter your complete address"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Additional Notes"}),(0,o.jsx)("textarea",{name:"notes",value:x.notes,onChange:b,className:"w-full p-2 border rounded-md",rows:3,placeholder:"Any special instructions or requirements"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Tailor (Optional)"}),(0,o.jsxs)("select",{name:"tailorId",value:x.tailorId,onChange:b,className:"w-full p-2 border rounded-md",children:[(0,o.jsx)("option",{value:"",children:"No preference"}),u.map((e=>(0,o.jsx)("option",{value:e.id,children:e.name},e.id)))]})]}),(0,o.jsx)("button",{type:"submit",className:"w-full bg-blue-600 text-white py-3 rounded-md hover:bg-blue-700 transition-colors",children:"Confirm Booking"})]})]})]})}},369:(e,s,t)=>{t.d(s,{A:()=>a});const a=(0,t(639).A)("BadgeIndianRupee",[["path",{d:"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z",key:"3c2336"}],["path",{d:"M8 8h8",key:"1bis0t"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"m13 17-5-1h1a4 4 0 0 0 0-8",key:"nu2bwa"}]])}}]);
//# sourceMappingURL=328.7fdcdc36.chunk.js.map